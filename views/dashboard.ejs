<%- include('partials/header') %>
<div class="container my-4">
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card-welcome shadow">
                <div class="card-header bg-primary text-white">
                    <h3>Welcome to your Dashboard</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <h4>Hello, <%= user.fullName %>!</h4>
                            <p>Email: <%= user.email %></p>
                            <% if (user.createdAt) { %>
                                <p>Account created: <%= new Date(user.createdAt).toLocaleDateString() %></p>
                            <% } else { %>
                                <p>Account creation date not available.</p>
                            <% } %>
                        </div>
                        <!-- Action Buttons -->
                        <div class="col-md-4 text-end">
                            <!-- Add Marks Button -->
                            <a href="/marks/add" class="btn btn-success btn-lg mb-2 w-100">
                                <i class="bi bi-plus-circle"></i> Add Marks
                            </a>
                            <!-- View Educational History Button -->
                            <a href="/marks" class="btn btn-primary btn-lg w-100">
                                <i class="bi bi-list-ul"></i> View Educational History
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Educational Goals Section -->
<div class="row mb-4">
    <div class="col-md-12">
      <div class="card-welcome shadow">
        <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
          <h4 class="mb-0">Educational Goals</h4>
          <a href="/goals" class="btn btn-light btn-sm">View All Goals</a>
        </div>
        <div class="card-body">
          <% if (goals && goals.length > 0) { %>
            <div class="row g-4">
              <% goals.forEach(goal => { %>
                <div class="col-md-4">
                  <div class="card h-100 shadow-sm">
                    <div class="card-header d-flex justify-content-between align-items-center bg-light">
                      <h5 class="mb-0 text-truncate"><%= goal.name %></h5>
                      <span class="badge <%= goal.isOnTrack ? 'bg-success' : 'bg-warning' %>">
                        <%= goal.isOnTrack ? 'On Track' : 'Needs Improvement' %>
                      </span>
                    </div>
                    <div class="card-body">
                      <dl class="row mb-0">
                        <dt class="col-6">Subject:</dt>
                        <dd class="col-6"><%= goal.subject %></dd>

                        <dt class="col-6">Target Score:</dt>
                        <dd class="col-6"><%= goal.targetScore.toFixed(2) %>%</dd>

                        <dt class="col-6">Current Score:</dt>
                        <dd class="col-6"><%= goal.currentScore.toFixed(2) %>%</dd>

                        <dt class="col-6">Deadline:</dt>
                        <dd class="col-6"><%= new Date(goal.targetDate).toLocaleDateString() %></dd>
                      </dl>
                      <a href="/goals/<%= goal._id %>" class="btn btn-outline-primary btn-sm w-100 mt-3">
                        View Details
                      </a>
                    </div>
                  </div>
                </div>
              <% }); %>
            </div>
          <% } else { %>
            <div class="text-center py-5">
              <i class="bi bi-journal-plus fs-1 text-muted"></i>
              <h5>No Active Goals</h5>
              <p>Set educational goals to track your academic progress.</p>
              <a href="/goals/add" class="btn btn-primary">Create New Goal</a>
            </div>
          <% } %>
        </div>
      </div>
    </div>
</div>
<!-- Reminders Section -->
<div class="row mb-4">
  <div class="col-md-12">
      <div class="card-welcome shadow">
          <div class="card-header bg-primary text-white">
              <h3>Study Reminders</h3>
          </div>
          <div class="card-body">
              <div class="row">
                  <div class="col-md-8">
                      <p>Manage your study schedule and important deadlines</p>
                  </div>
                  <!-- Reminder Action Buttons -->
                  <div class="col-md-4 text-end">
                      <!-- Add Reminder Button -->
                      <a href="/reminders/add" class="btn btn-warning btn-lg mb-2 w-100">
                          <i class="bi bi-plus-circle"></i> Add Reminder
                      </a>
                      <!-- View Reminders Button -->
                      <a href="/reminders" class="btn btn-info btn-lg w-100">
                          <i class="bi bi-calendar-check"></i> View Reminders
                      </a>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
<!-- Notes Section -->
<div class="row mb-4">
  <div class="col-md-12">
      <div class="card-welcome shadow">
          <div class="card-header bg-primary text-white">
              <h3>Notes</h3>
          </div>
          <div class="card-body">
              <div class="row">
                  <!-- Description -->
                  <div class="col-md-8">
                      <p>Manage your study notes and important information.</p>
                  </div>

                  <!-- Action Buttons -->
                  <div class="col-md-4 text-end">
                      <!-- Add Notes Button -->
                      <a href="/notes/add" class="btn btn-warning btn-lg mb-2 w-100">
                          <i class="bi bi-plus-circle"></i> Add Notes
                      </a>

                      <!-- View Notes Button -->
                      <a href="/notes" class="btn btn-info btn-lg w-100">
                          <i class="bi bi-journal-text"></i> View Notes
                      </a>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

</div>

<%- include('partials/footer') %>